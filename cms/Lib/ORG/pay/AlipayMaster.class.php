<?phpinclude 'AlipayMaster/buildermodel/AlipayTradePagePayContentBuilder.php';include 'AlipayMaster/service/AlipayTradeService.php';class AlipayMaster{    protected  $order_info;    protected  $pay_config;    public function __construct($order_info=[])    {        $this->order_info = $order_info;        $this->pay_config = $this->getconfig();    }    public function page_pay(){        $payRequestBuilder = new \AlipayTradePagePayContentBuilder();        $payRequestBuilder->setSubject($this->order_info['subject']);        $payRequestBuilder->setTotalAmount($this->order_info['total_amount']);        $payRequestBuilder->setOutTradeNo($this->order_info['out_trade_no']);        //$payRequestBuilder->setSysServiceProviderId('2088521153863295');       /* $payRequestBuilder->setSellerId('2088521153863295');        $payRequestBuilder->setAppAuthToken('201611BBc9392e440a7a4f3f9d88b9b0ea56bA29');*/        //TODO：自动处理支付配置信息        $pagePayConfig = [            'gatewayUrl'           => 'https://openapi.alipay.com/gateway.do',            'app_id'               => $this->pay_config['alipay_appid'],            'merchant_private_key' => $this->pay_config['alipay_private_key'],            'alipay_public_key'    => $this->pay_config['alipay_public_key'],            'charset'              => 'UTF-8',            'sign_type'            => 'RSA2'        ];        //dump($pagePayConfig);exit;        $aop = new AlipayTradeService($pagePayConfig);        $aop->pagePay($payRequestBuilder,'http://www.hdhsmart.com/source/web_alipay_return.php','http://www.hdhsmart.com/source/web_alipay_notice.php');    }    protected function getconfig(){        $m=D('config');        $configArr = $m->field("name,value")->select();        foreach($configArr as $key=>$value){            $config[$value['name']] = $value['value'];        }        return $config;    }}?>