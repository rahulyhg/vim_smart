<include file="Public:header"/>	<form id="myform" method="post" action="{pigcms{:U('Hickey/hickey_edit')}">		<input type="hidden" name="pigcms_id" value="{pigcms{$hickey_array.pigcms_id}"/>		<table cellpadding="0" cellspacing="0" class="frame_form" width="100%" id="table">			<tr>				<th width="80">接口名称</th>				<td><input type="text" class="input fl" name="hickey_name" id="cat_name" size="25" value="{pigcms{$hickey_array.hickey_name}" validate="required:true" tips=""/></td>			</tr>			<tr>				<th width="80">施行动作名称</th>				<td><input type="text" class="input fl" name="hick_action" id="cat_name" size="25" value="{pigcms{$hickey_array.hick_action}" validate="required:true" tips=""/></td>			</tr>			<tr>				<th width="80">云平台名称</th>				<td>					<select id="terrace_name" name="terrace_id">						<option value="0">请选择</option>						<foreach name="terrace_array" item="sv">							<if condition="$hickey_array['terrace_id'] eq $sv['pigcms_id']">							<option value="{pigcms{$sv.pigcms_id}" selected="selected">{pigcms{$sv.terrace_name}</option>							<else/>								<option value="{pigcms{$sv.pigcms_id}">{pigcms{$sv.terrace_name}</option>							</if>						</foreach>					</select>				</td>			</tr>						<tr>				<th width="80">接口基类名称</th>				<td><span id="terrace_class"></span></td>			</tr>			<tr>				<th width="80">本地调用方法</th>				<td><input type="text" class="input fl" id="hickey_control" name="hickey_control" size="25" value="{pigcms{$hickey_array.hickey_control}" validate="required:true" tips="只能使用英文或数字"/></td>			</tr>			<tr>				<th width="80">请求方式</th>				<td>					<select name="curl_type">						<option value="0"<if condition="$hickey_array['curl_type'] eq 0">selected='selected'<else/></if>>请选择</option>						<option value="1"<if condition="$hickey_array['curl_type'] eq 1">selected='selected'<else/></if>>PUT</option>						<option value="2"<if condition="$hickey_array['curl_type'] eq 2">selected='selected'<else/></if>>DELETE</option>						<option value="3"<if condition="$hickey_array['curl_type'] eq 3">selected='selected'<else/></if>>GET</option>						<option value="4"<if condition="$hickey_array['curl_type'] eq 4">selected='selected'<else/></if>>POST</option>					</select>				</td>			</tr>			<tr>				<th width="80">是否启用</th>				<td id="check">					<span class="cb-enable"><label class="cb-enable <if condition="$hickey_array['is_use'] eq 1">selected</if>"><span>是</span><input type="radio" id="sky" name="is_use" value="1" <if condition="$hickey_array['is_use'] eq 1">selected='selected'</if>/></label></span>					<span class="cb-disable"><label class="cb-disable <if condition="$hickey_array['is_use'] eq 0">selected</if>""><span>否</span><input type="radio" id="sky1" name="is_use" value="0"<if condition="$hickey_array['is_use'] eq 0">selected='selected'</if>/></label></span>					<em class="notice_tips" tips="如果选择启用，颜色会有变化"></em>				</td>			</tr>			<foreach name="arguments_all_feild" item="sv">			<tr name="add_tr">				<th width="80">其他参数</th>				<td>					<input type="text" class="input fl" name="arguments[]" size="10" value="{pigcms{$sv.arguments}"/>&nbsp;&nbsp;&nbsp;&nbsp;					<input type="text" class="input fl" name="arguments_value[]" size="10" value="{pigcms{$sv.arguments_value}" <if condition="$sv.arguments_type eq 2">disabled='disabled'<else/></if>/>					<select name="arguments_type[]">						<option value="0"<if condition="$sv.arguments_type eq 0">selected='selected'<else/></if>>参数类型</option>						<option value="1"<if condition="$sv.arguments_type eq 1">selected='selected'<else/></if>>常量</option>						<option value="2"<if condition="$sv.arguments_type eq 2">selected='selected'<else/></if>>变量</option>					</select>				</td>			</tr>			</foreach>			<tr>				<td>操作</td>				<td><span id="mybutton">添加行</span>&nbsp;&nbsp;&nbsp;&nbsp;<span id="mybutton2">删除行</span></td>			</tr>			<script>				$(function(){					$("#mybutton").click(function(){						var tr="<tr><th width='80'>其他参数</th><td> <input type='text' class='input fl' name='arguments[]' size='10' placeholder='参数'/> <input type='text' class='input fl' name='arguments_value[]' size='10' placeholder='参数值'/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<select name='arguments_type[]'><option value='0'>参数类型</option><option value='1'>常量</option><option value='2'>变量</option></select></td></tr>";						$("*[name='add_tr']:last").after(tr);					});					$("#mybutton2").click(function(){						var is_null = $("input[name='arguments[]']:last").val();						var td_length = $("#table tr").length;						var pot = td_length-2;						if(is_null == ''){							$("#table tr:eq("+pot+")").remove();						}					});					$("#terrace_name").change(function(){						var terrace_name = $(this).find("option:selected").text();						$.ajax({							url: "{pigcms{:U('Hickey/seacrch_name')}",							type: "GET",							data: {'terrace_name': terrace_name},							success: function (res) {								$("#terrace_class").html(res);							}						});					});					$("#check").click(function(){						var hick_id = "{pigcms{$hickey_array.hick_ac_id}";						var pigcms_id = "{pigcms{$hickey_array.pigcms_id}";						$.ajax({							url: "{pigcms{:U('Hickey/check_use')}",							type: "GET",							data: {'hick_id':hick_id,'pigcms_id':pigcms_id},							success: function (res) {								if(res == 1){									alert("当前设备正在使用其他平台，请先确保停用其他平台后再尝试开启！");									$("#sky1").attr("checked",true);									$(".cb-enable").removeClass("selected");									$(".cb-disable").addClass("selected");								}else{																	}							}						});					});					$("#terrace_name").ready(function(){						var terrace_name = $("#terrace_name").find("option:selected").text();						$.ajax({							url: "{pigcms{:U('Hickey/seacrch_name')}",							type: "GET",							data: {'terrace_name': terrace_name},							success: function (res) {								$("#terrace_class").html(res);							}						});					});					$("*[name='arguments_type[]']").change(function(){						var arguments_type = $(this).find("option:selected").text();						var pos = $(this).parent().parent().index("");						pos = pos-7;						if(arguments_type == '常量'){							$("input[name='arguments_value[]']:eq("+pos+")").attr('disabled',false);							$("input[name='arguments_value[]']:eq("+pos+")").css({"color":"#888"});						}else if(arguments_type == '变量'){							$("input[name='arguments_value[]']:eq("+pos+")").attr('disabled',true);						}					});				});			</script>		</table>		<div class="btn hidden">			<input type="submit" id="dosubmit" value="提交" class="button" />			<input type="reset" value="取消" class="button" />		</div>	</form><include file="Public:footer"/>